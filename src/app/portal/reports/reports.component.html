<div class="top-bar">
  <h2 class="title">Relatórios</h2>
</div>
<div class="container mt-3 pb-2">

  <div class="row">
    <div class="col-md-6 mt-3">
      <div class="row mr-md-0">
        <div class="col-12 p-0">
          <h2 class="titles">Tipos de venda pelo Cardápio</h2>
        </div>
        <div class="col-12 box pt-3 pb-3">
          <div class="row">
            <div class="col-12">
              <canvas baseChart
                      [options]="preSalesTypeChart.options"
                      [data]="preSalesTypeChart.data"
                      [labels]="preSalesTypeChart.labels"
                      [chartType]="preSalesTypeChart.chartType">
              </canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-6 mt-3">
      <div class="row ml-md-0">
        <div class="col-12 p-0">
          <h2 class="titles">Métodos de pagamento pelo Cardápio</h2>
        </div>
        <div class="col-12 box pt-3 pb-3">
          <div class="row">
            <div class="col-12">
              <canvas baseChart
                      [options]="preSalesPaymentChart.options"
                      [data]="preSalesPaymentChart.data"
                      [labels]="preSalesPaymentChart.labels"
                      [chartType]="preSalesPaymentChart.chartType">
              </canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-6 mt-3">
      <div class="row mr-md-0">
        <div class="col-12 p-0">
          <h2 class="titles">Conversão de vendas do Cardápio</h2>
        </div>
        <div class="col-12 box pt-3 pb-3">
          <div class="row">
            <div class="col-12">
              <canvas baseChart
                      [options]="preSalesConversion.options"
                      [data]="preSalesConversion.data"
                      [labels]="preSalesConversion.labels"
                      [chartType]="preSalesConversion.chartType">
              </canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-6 mt-3">
      <div class="row ml-md-0">
        <div class="col-12 p-0">
          <h2 class="titles">Vendas por usuário</h2>
        </div>
        <div class="col-12 box pt-3 pb-3">
          <div class="row">
            <div class="col-12">
              <canvas baseChart
                      [options]="salesUsersChart.options"
                      [data]="salesUsersChart.data"
                      [labels]="salesUsersChart.labels"
                      [chartType]="salesUsersChart.chartType">
              </canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-6 mt-3">
      <div class="row mr-md-0">
        <div class="col-12 p-0">
          <h2 class="titles">Entregas por Entregadores</h2>
        </div>
        <div class="col-12 box pt-3 pb-3">
          <div class="row">
            <div class="col-12">
              <canvas baseChart
                      [options]="salesDeliverymanChart.options"
                      [data]="salesDeliverymanChart.data"
                      [labels]="salesDeliverymanChart.labels"
                      [chartType]="salesDeliverymanChart.chartType">
              </canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-6 mt-3">
      <div class="row ml-md-0">
        <div class="col-12 p-0">
          <h2 class="titles">Métodos de Pagamento de Vendas Finalizadas</h2>
        </div>
        <div class="col-12 box pt-3 pb-3">
          <div class="row">
            <div class="col-12">
              <canvas baseChart
                      [options]="salesPaymentMethodChart.options"
                      [data]="salesPaymentMethodChart.data"
                      [labels]="salesPaymentMethodChart.labels"
                      [chartType]="salesPaymentMethodChart.chartType">
              </canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-6 mt-3">
      <div class="row mr-md-0 h-100">
        <div class="col-12 p-0">
          <h2 class="titles">Tipos de venda finalizadas</h2>
        </div>
        <div style="height: calc(100% - 27px)" class="col-12 box pt-3 pb-3">
          <div class="row">
            <div class="col-12">
              <canvas baseChart
                      [options]="salesTypeChart.options"
                      [data]="salesTypeChart.data"
                      [labels]="salesTypeChart.labels"
                      [chartType]="salesTypeChart.chartType">
              </canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-md-6 mt-3">
      <div class="row ml-md-0 h-100">
        <div class="col-12 p-0">
          <h2 class="titles">Quantidade total de vendas por produto</h2>
        </div>
        <div style="height: calc(100% - 27px)" class="col-12 box pt-3 pb-3">
          <div class="row">
            <div class="col-12 product-report" *ngFor="let products of allSalesProducts | paginate: productSales">
              <div class="product-report__header">
                <span>{{products.name}}</span>
                <span>{{products.total}}</span>
              </div>
              <div class="product-report__chart">
                <span [style.width.%]="getPercentage(products.total)">
                </span>
                {{getPercentage(products.total).toString().substring(0, getPercentage(products.total).toString().indexOf('.') + 3).replace('.', ',')}}
                %
              </div>
            </div>
            <div class="col-12 mt-2">
              <pagination-controls
                id="productSales" (pageChange)="productSales.currentPage = $event"
                class="custom-pagination">
              </pagination-controls>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-12 mt-3">
      <div class="row">
        <div class="col-12 p-0">
          <h2 class="titles">Fluxo de caixa</h2>
        </div>
        <div class="col-12 box pt-3 pb-3">
          <div class="row">
            <div class="col-md-6 form-group">
              <label for="sales-box">Selecione Período</label>
              <select (change)="changeLineChart()" [(ngModel)]="salesBoxControl" class="form-control custom-select" id="sales-box">
                <option [value]="salesBoxControlEnum.SEVEN_DAYS">Sete dias</option>
                <option [value]="salesBoxControlEnum.LAST_MONTH">Último Mês</option>
                <option [value]="salesBoxControlEnum.LAST_SIX_MONTH">Seis Meses</option>
                <option [value]="salesBoxControlEnum.FULL_TIME">Tudo</option>
              </select>
            </div>
            <div class="col-12">
              <canvas baseChart
                      [options]="saleBoxChart.options"
                      [datasets]="saleBoxChart.lineChartData"
                      [labels]="saleBoxChart.labels"
                      [chartType]="saleBoxChart.chartType">
              </canvas>
            </div>
          </div>
        </div>
      </div>
    </div>

  </div>

  <div class="row mt-3">
    <div class="col-12 p-0">
      <h2 class="titles">Todas as vendas</h2>
    </div>
    <div class="col-12 box pt-3 pb-3">
      <div class="row">
        <div class="col-12">
          <div class="table-responsive">
            <table class="table table-hover">
              <thead class="thead-dark">
              <tr>
                <th scope="col">Vendedor</th>
                <th scope="col">Valor total</th>
                <th scope="col">Data</th>
                <th scope="col">Forma de pagamento</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let sale of allSales | paginate: salesPag; let idx = index">
                <td>{{sale?.name}}</td>
                <td>{{sale?.sale_value | currency: 'BRL'}}</td>
                <td>{{sale?.sale_date | date: 'dd/MM/YYYY H:mm'}}</td>
                <td class="text-uppercase">{{sale?.description}}</td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="col-12 mt-2">
          <pagination-controls
            id="sales" (pageChange)="salesPag.currentPage = $event"
            class="custom-pagination">
          </pagination-controls>
        </div>
      </div>
    </div>
  </div>
</div>
